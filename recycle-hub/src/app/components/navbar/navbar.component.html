<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" routerLink="/">
      <svg class="recycling-icon me-2" viewBox="0 0 24 24">
        <path fill="currentColor" d="M21.82,15.42L19.32,19.75C18.83,20.61 17.92,21.06 17,21H15V23L12.5,18.5L15,14V16H17.82L15.6,12.15L19.93,9.65L21.73,12.77C22.25,13.54 22.32,14.57 21.82,15.42M9.21,3.06H14.21C15.19,3.06 16.04,3.63 16.45,4.45L17.45,6.19L19.18,5.19L16.54,9.6L11.39,9.69L13.12,8.69L11.71,6.24L9.5,10.09L5.16,7.59L6.96,4.47C7.37,3.64 8.22,3.06 9.21,3.06M5.05,19.76L2.55,15.43C2.06,14.58 2.13,13.56 2.64,12.79L3.64,11.06L1.91,10.06L7.05,10.14L9.7,14.56L7.97,13.56L6.56,16H11V21H7.4C6.47,21.07 5.55,20.61 5.05,19.76Z"/>
      </svg>
      <span class="brand-text">RecycleHub</span>
    </a>
    
    <div class="navbar-nav ms-auto">
      <!-- Menu pour utilisateur connectÃ© -->
      <ng-container *ngIf="currentUser">
        <div class="profile-dropdown">
          <div id="profile-button" 
               class="profile-image-container" 
               (click)="toggleProfileMenu()"
               [class.active]="isProfileMenuOpen">
            <img *ngIf="currentUser.profileImage" 
                 [src]="currentUser.profileImage" 
                 [alt]="currentUser.firstName"
                 class="profile-image">
            <svg *ngIf="!currentUser.profileImage" class="default-profile-icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
            </svg>
          </div>
          
          <div id="profile-menu" 
               class="profile-menu" 
               *ngIf="isProfileMenuOpen">
            <div class="profile-header">
              <h3>{{ currentUser.firstName }} {{ currentUser.lastName }}</h3>
              <p class="email">{{ currentUser.email }}</p>
            </div>
            <div class="profile-info">
              <div class="info-item" *ngIf="currentUser.role === 'USER'">
                <span class="label">Points</span>
                <span class="value">{{ currentUser.points || 0 }} ðŸŒŸ</span>
              </div>
              <div class="info-item">
                <span class="label">RÃ´le</span>
                <span class="value">{{ currentUser.role }}</span>
              </div>
            </div>
            <div class="profile-actions">
              <button class="btn btn-outline-danger w-100" 
                      (click)="onLogout(); $event.stopPropagation()">
                <svg class="logout-icon me-2" viewBox="0 0 24 24">
                  <path fill="currentColor" d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z"/>
                </svg>
                DÃ©connexion
              </button>
            </div>
          </div>
        </div>
      </ng-container>

      <!-- Menu pour visiteur -->
      <ng-container *ngIf="!currentUser">
        <a class="nav-link d-flex align-items-center me-3" routerLink="/signup">
          <svg class="login-icon me-2" viewBox="0 0 24 24">
            <path fill="currentColor" d="M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z"/>
          </svg>
          <span>CrÃ©er un compte</span>
        </a>
        <a class="nav-link d-flex align-items-center" routerLink="/login">
          <svg class="login-icon me-2" viewBox="0 0 24 24">
            <path fill="currentColor" d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
          </svg>
          <span>Connexion</span>
        </a>
      </ng-container>
    </div>
  </div>
</nav>
