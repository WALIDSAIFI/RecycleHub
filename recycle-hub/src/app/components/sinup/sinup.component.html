<div class="signup-container">
  <div class="signup-card">
    <div class="text-center mb-3">
      <svg class="recycling-icon" viewBox="0 0 24 24">
        <path fill="currentColor" d="M21.82,15.42L19.32,19.75C18.83,20.61 17.92,21.06 17,21H15V23L12.5,18.5L15,14V16H17.82L15.6,12.15L19.93,9.65L21.73,12.77C22.25,13.54 22.32,14.57 21.82,15.42M9.21,3.06H14.21C15.19,3.06 16.04,3.63 16.45,4.45L17.45,6.19L19.18,5.19L16.54,9.6L11.39,9.69L13.12,8.69L11.71,6.24L9.5,10.09L5.16,7.59L6.96,4.47C7.37,3.64 8.22,3.06 9.21,3.06M5.05,19.76L2.55,15.43C2.06,14.58 2.13,13.56 2.64,12.79L3.64,11.06L1.91,10.06L7.05,10.14L9.7,14.56L7.97,13.56L6.56,16H11V21H7.4C6.47,21.07 5.55,20.61 5.05,19.76Z"/>
      </svg>
      <h2>Inscription</h2>
    </div>

    <div *ngIf="error$ | async as error" class="alert alert-danger">
      {{ error }}
    </div>

    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="row g-2">
      <div class="col-6">
        <label for="firstName" class="form-label">Prénom</label>
        <input type="text" class="form-control" id="firstName" formControlName="firstName"
          [class.is-invalid]="signupForm.get('firstName')?.invalid && signupForm.get('firstName')?.touched">
        <div class="invalid-feedback">Requis</div>
      </div>

      <div class="col-6">
        <label for="lastName" class="form-label">Nom</label>
        <input type="text" class="form-control" id="lastName" formControlName="lastName"
          [class.is-invalid]="signupForm.get('lastName')?.invalid && signupForm.get('lastName')?.touched">
        <div class="invalid-feedback">Requis</div>
      </div>

      <div class="col-12">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" formControlName="email"
          [class.is-invalid]="signupForm.get('email')?.invalid && signupForm.get('email')?.touched">
        <div class="invalid-feedback">Email invalide</div>
      </div>

      <div class="col-12">
        <label for="password" class="form-label">Mot de passe</label>
        <input type="password" class="form-control" id="password" formControlName="password"
          [class.is-invalid]="signupForm.get('password')?.invalid && signupForm.get('password')?.touched">
        <div class="invalid-feedback">Min. 6 caractères</div>
      </div>

      <div class="col-12">
        <label for="address" class="form-label">Adresse</label>
        <input type="text" class="form-control" id="address" formControlName="address"
          [class.is-invalid]="signupForm.get('address')?.invalid && signupForm.get('address')?.touched">
        <div class="invalid-feedback">Requis</div>
      </div>

      <div class="col-8">
        <label for="city" class="form-label">Ville</label>
        <input type="text" class="form-control" id="city" formControlName="city"
          [class.is-invalid]="signupForm.get('city')?.invalid && signupForm.get('city')?.touched">
        <div class="invalid-feedback">Requis</div>
      </div>

      <div class="col-4">
        <label for="postalCode" class="form-label">Code postal</label>
        <input type="text" class="form-control" id="postalCode" formControlName="postalCode"
          [class.is-invalid]="signupForm.get('postalCode')?.invalid && signupForm.get('postalCode')?.touched">
        <div class="invalid-feedback">5 chiffres</div>
      </div>

      <div class="col-6">
        <label for="phone" class="form-label">Téléphone</label>
        <input type="tel" class="form-control" id="phone" formControlName="phone"
          [class.is-invalid]="signupForm.get('phone')?.invalid && signupForm.get('phone')?.touched">
        <div class="invalid-feedback">Format invalide</div>
      </div>

      <div class="col-6">
        <label for="birthDate" class="form-label">Date de naissance</label>
        <input type="date" class="form-control" id="birthDate" formControlName="birthDate"
          [class.is-invalid]="signupForm.get('birthDate')?.invalid && signupForm.get('birthDate')?.touched">
        <div class="invalid-feedback">Requis</div>
      </div>

      <div class="col-12">
        <label for="profileImage" class="form-label">Photo de profil (optionnel)</label>
        <input type="file" class="form-control" id="profileImage" formControlName="profileImage" accept="image/*">
      </div>

      <div class="col-12 mt-3">
        <button type="submit" class="btn btn-primary w-100" 
                [disabled]="signupForm.invalid || (loading$ | async)">
          <span *ngIf="loading$ | async">Chargement...</span>
          <span *ngIf="!(loading$ | async)">S'inscrire</span>
        </button>
      </div>
    </form>
  </div>
</div>
